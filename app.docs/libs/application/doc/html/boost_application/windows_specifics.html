<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Windows specifics</title>
<link rel="stylesheet" href="../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Boost.Application">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;Boost.Application">
<link rel="prev" href="other_features.html" title="Other Features">
<link rel="next" href="posix_specifics.html" title="POSIX specifics">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../boost.png"></td>
<td align="center"><a href="../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="other_features.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="posix_specifics.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_application.windows_specifics"></a><a class="link" href="windows_specifics.html" title="Windows specifics">Windows specifics</a>
</h2></div></div></div>
<div class="toc"><dl class="toc">
<dt><span class="section"><a href="windows_specifics.html#boost_application.windows_specifics.setup_service">Setup
      for Windows Service</a></span></dt>
<dt><span class="section"><a href="windows_specifics.html#boost_application.windows_specifics.multi_service">Multi-Service
      Process</a></span></dt>
<dt><span class="section"><a href="windows_specifics.html#boost_application.windows_specifics.unicode">Unicode
      on Services</a></span></dt>
</dl></div>
<p>
      Boost.Application have some specifics on each side, here the user that uses
      Windows system need be aware.
    </p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_application.windows_specifics.setup_service"></a><a class="link" href="windows_specifics.html#boost_application.windows_specifics.setup_service" title="Setup for Windows Service">Setup
      for Windows Service</a>
</h3></div></div></div>
<p>
        In this version the library don&#8217;t provide official support for "service
        or daemon" installation. This is because we need maintain symmetry between
        functionality provided on all platforms that the lib support, and on POSIX
        side, the installation process varies a lot. Thus the library provide installation
        functionality for major system as sample on examples folder. In future we
        have plan to bring these functionality to core library.
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
<p>
          For POSIX you need use some shell script to control a daemon, refer to:
        </p>
<p>
          \example\setup\posix\ubuntu
        </p>
<p>
          That has some samples from Ubuntu.
        </p>
</td></tr>
</table></div>
<p>
        On Window we will use this sample code:
      </p>
<p>
        \example\setup\windows\setup\service_setup.hpp
      </p>
<p>
        Boost.Application provides a setup code, that can be added to to enable installation/uninstallation
        of windows service application.
      </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">windows_service_setup</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>

   <span class="identifier">windows_service_setup</span><span class="special">(</span><span class="identifier">application</span><span class="special">::</span><span class="identifier">context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">)</span>
      <span class="special">:</span> <span class="identifier">context_</span><span class="special">(</span><span class="identifier">context</span><span class="special">)</span>
   <span class="special">{</span>
   <span class="special">}</span>

   <span class="keyword">int</span> <span class="keyword">operator</span><span class="special">()()</span>
   <span class="special">{</span>

<span class="preprocessor">#if</span> <span class="special">!</span><span class="identifier">defined</span><span class="special">(</span><span class="identifier">__MINGW32__</span><span class="special">)</span>

      <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Setup Windows Service "</span>
         <span class="special">&lt;&lt;</span> <span class="string">"(Note that you need run this AS ADMIN!)"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>

      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_ptr</span><span class="special">&lt;</span><span class="identifier">application</span><span class="special">::</span><span class="identifier">args</span><span class="special">&gt;</span> <span class="identifier">myargs</span>
         <span class="special">=</span> <span class="identifier">context_</span><span class="special">.</span><span class="identifier">find</span><span class="special">&lt;</span><span class="identifier">application</span><span class="special">::</span><span class="identifier">args</span><span class="special">&gt;();</span>

      <span class="comment">// define our simple installation schema options</span>
      <span class="identifier">po</span><span class="special">::</span><span class="identifier">options_description</span> <span class="identifier">install</span><span class="special">(</span><span class="string">"service options"</span><span class="special">);</span>
      <span class="identifier">install</span><span class="special">.</span><span class="identifier">add_options</span><span class="special">()</span>
         <span class="special">(</span><span class="string">"help"</span><span class="special">,</span> <span class="string">"produce a help message"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">",i"</span><span class="special">,</span> <span class="string">"install service"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">",c"</span><span class="special">,</span> <span class="string">"check service"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">",u"</span><span class="special">,</span> <span class="string">"unistall service"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">"path"</span><span class="special">,</span> <span class="identifier">po</span><span class="special">::</span><span class="identifier">value</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;(),</span> <span class="string">"service path"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">"name"</span><span class="special">,</span> <span class="identifier">po</span><span class="special">::</span><span class="identifier">value</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;(),</span> <span class="string">"service name"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">"user"</span><span class="special">,</span> <span class="identifier">po</span><span class="special">::</span><span class="identifier">value</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()-&gt;</span><span class="identifier">default_value</span><span class="special">(</span><span class="string">""</span><span class="special">),</span> <span class="string">"user logon (optional, installation only)"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">"pass"</span><span class="special">,</span> <span class="identifier">po</span><span class="special">::</span><span class="identifier">value</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()-&gt;</span><span class="identifier">default_value</span><span class="special">(</span><span class="string">""</span><span class="special">),</span> <span class="string">"user password (optional, installation only)"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">"display"</span><span class="special">,</span> <span class="identifier">po</span><span class="special">::</span><span class="identifier">value</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()-&gt;</span><span class="identifier">default_value</span><span class="special">(</span><span class="string">""</span><span class="special">),</span> <span class="string">"service display name (optional, installation only)"</span><span class="special">)</span>
         <span class="special">(</span><span class="string">"description"</span><span class="special">,</span> <span class="identifier">po</span><span class="special">::</span><span class="identifier">value</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()-&gt;</span><span class="identifier">default_value</span><span class="special">(</span><span class="string">""</span><span class="special">),</span> <span class="string">"service description (optional, installation only)"</span><span class="special">)</span>
         <span class="special">;</span>

      <span class="identifier">po</span><span class="special">::</span><span class="identifier">variables_map</span> <span class="identifier">vm</span><span class="special">;</span>
      <span class="identifier">po</span><span class="special">::</span><span class="identifier">store</span><span class="special">(</span><span class="identifier">po</span><span class="special">::</span><span class="identifier">parse_command_line</span><span class="special">(</span><span class="identifier">myargs</span><span class="special">-&gt;</span><span class="identifier">argc</span><span class="special">(),</span> <span class="identifier">myargs</span><span class="special">-&gt;</span><span class="identifier">argv</span><span class="special">(),</span> <span class="identifier">install</span><span class="special">),</span> <span class="identifier">vm</span><span class="special">);</span>
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">system</span><span class="special">::</span><span class="identifier">error_code</span> <span class="identifier">ec</span><span class="special">;</span>

      <span class="keyword">if</span> <span class="special">(</span><span class="identifier">vm</span><span class="special">.</span><span class="identifier">count</span><span class="special">(</span><span class="string">"help"</span><span class="special">))</span>
      <span class="special">{</span>
         <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">install</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">;</span>
         <span class="keyword">return</span> <span class="keyword">true</span><span class="special">;</span>
      <span class="special">}</span>

      <span class="keyword">if</span> <span class="special">(</span><span class="identifier">vm</span><span class="special">.</span><span class="identifier">count</span><span class="special">(</span><span class="string">"-i"</span><span class="special">))</span>
      <span class="special">{</span>
         <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">s</span> <span class="special">=</span> <span class="identifier">vm</span><span class="special">[</span><span class="string">"name"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;();</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">example</span><span class="special">::</span><span class="identifier">install_windows_service</span><span class="special">(</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"name"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()),</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"display"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()),</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"description"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()),</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"path"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()),</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"user"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()),</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"pass"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;())).</span><span class="identifier">install</span><span class="special">(</span><span class="identifier">ec</span><span class="special">);</span>

         <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ec</span><span class="special">.</span><span class="identifier">message</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>

         <span class="keyword">return</span> <span class="keyword">true</span><span class="special">;</span>
      <span class="special">}</span>

      <span class="keyword">if</span> <span class="special">(</span><span class="identifier">vm</span><span class="special">.</span><span class="identifier">count</span><span class="special">(</span><span class="string">"-c"</span><span class="special">))</span>
      <span class="special">{</span>
         <span class="keyword">bool</span> <span class="identifier">exist</span> <span class="special">=</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">example</span><span class="special">::</span><span class="identifier">check_windows_service</span><span class="special">(</span>
            <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"name"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;())).</span><span class="identifier">exist</span><span class="special">(</span><span class="identifier">ec</span><span class="special">);</span>

         <span class="keyword">if</span><span class="special">(</span><span class="identifier">ec</span><span class="special">)</span>
           <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ec</span><span class="special">.</span><span class="identifier">message</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
         <span class="keyword">else</span>
         <span class="special">{</span>
            <span class="keyword">if</span><span class="special">(</span><span class="identifier">exist</span><span class="special">)</span>
               <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span>
                  <span class="special">&lt;&lt;</span> <span class="string">"The service "</span>
                  <span class="special">&lt;&lt;</span> <span class="identifier">vm</span><span class="special">[</span><span class="string">"name"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()</span>
                  <span class="special">&lt;&lt;</span>  <span class="string">" is installed!"</span>
                  <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
            <span class="keyword">else</span>
               <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span>
                  <span class="special">&lt;&lt;</span> <span class="string">"The service "</span>
                  <span class="special">&lt;&lt;</span> <span class="identifier">vm</span><span class="special">[</span><span class="string">"name"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()</span>
                  <span class="special">&lt;&lt;</span>  <span class="string">" is NOT installed!"</span>
                  <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
         <span class="special">}</span>

         <span class="keyword">return</span> <span class="keyword">true</span><span class="special">;</span>
      <span class="special">}</span>

      <span class="keyword">if</span> <span class="special">(</span><span class="identifier">vm</span><span class="special">.</span><span class="identifier">count</span><span class="special">(</span><span class="string">"-u"</span><span class="special">))</span>
      <span class="special">{</span>
         <span class="identifier">application</span><span class="special">::</span><span class="identifier">example</span><span class="special">::</span><span class="identifier">uninstall_windows_service</span><span class="special">(</span>
            <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"name"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;()),</span>
            <span class="identifier">application</span><span class="special">::</span><span class="identifier">setup_arg</span><span class="special">(</span><span class="identifier">vm</span><span class="special">[</span><span class="string">"path"</span><span class="special">].</span><span class="identifier">as</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;())).</span><span class="identifier">uninstall</span><span class="special">(</span><span class="identifier">ec</span><span class="special">);</span>
			
         <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ec</span><span class="special">.</span><span class="identifier">message</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>

         <span class="keyword">return</span> <span class="keyword">true</span><span class="special">;</span>
      <span class="special">}</span>

<span class="preprocessor">#endif</span>

      <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
   <span class="special">}</span>

<span class="keyword">private</span><span class="special">:</span>
   <span class="identifier">application</span><span class="special">::</span><span class="identifier">context</span><span class="special">&amp;</span> <span class="identifier">context_</span><span class="special">;</span>

<span class="special">};</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">(</span><span class="keyword">int</span> <span class="identifier">argc</span><span class="special">,</span> <span class="keyword">char</span> <span class="special">*</span><span class="identifier">argv</span><span class="special">[])</span>
<span class="special">{</span>
   <span class="keyword">try</span>
   <span class="special">{</span>
      <span class="identifier">application</span><span class="special">::</span><span class="identifier">context</span> <span class="identifier">app_context</span><span class="special">;</span>
      <span class="identifier">windows_service_setup</span> <span class="identifier">app</span><span class="special">(</span><span class="identifier">app_context</span><span class="special">);</span>

      <span class="identifier">app_context</span><span class="special">.</span><span class="identifier">insert</span><span class="special">&lt;</span><span class="identifier">application</span><span class="special">::</span><span class="identifier">args</span><span class="special">&gt;(</span>
         <span class="identifier">boost</span><span class="special">::</span><span class="identifier">make_shared</span><span class="special">&lt;</span><span class="identifier">application</span><span class="special">::</span><span class="identifier">args</span><span class="special">&gt;(</span><span class="identifier">argc</span><span class="special">,</span> <span class="identifier">argv</span><span class="special">));</span>

      <span class="keyword">return</span> <span class="identifier">application</span><span class="special">::</span><span class="identifier">launch</span><span class="special">&lt;</span><span class="identifier">application</span><span class="special">::</span><span class="identifier">common</span><span class="special">&gt;(</span><span class="identifier">app</span><span class="special">,</span> <span class="identifier">app_context</span><span class="special">);</span>
   <span class="special">}</span>
   <span class="keyword">catch</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">system</span><span class="special">::</span><span class="identifier">system_error</span><span class="special">&amp;</span> <span class="identifier">se</span><span class="special">)</span>
   <span class="special">{</span>
      <span class="identifier">std</span><span class="special">::</span><span class="identifier">cerr</span> <span class="special">&lt;&lt;</span> <span class="identifier">se</span><span class="special">.</span><span class="identifier">what</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
      <span class="keyword">return</span> <span class="number">1</span><span class="special">;</span>
   <span class="special">}</span>
   <span class="keyword">catch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">exception</span> <span class="special">&amp;</span><span class="identifier">e</span><span class="special">)</span>
   <span class="special">{</span>
      <span class="identifier">std</span><span class="special">::</span><span class="identifier">cerr</span> <span class="special">&lt;&lt;</span> <span class="identifier">e</span><span class="special">.</span><span class="identifier">what</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
      <span class="keyword">return</span> <span class="number">1</span><span class="special">;</span>
   <span class="special">}</span>
   <span class="keyword">catch</span><span class="special">(...)</span>
   <span class="special">{</span>
      <span class="identifier">std</span><span class="special">::</span><span class="identifier">cerr</span> <span class="special">&lt;&lt;</span> <span class="string">"Unknown error."</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
      <span class="keyword">return</span> <span class="number">1</span><span class="special">;</span>
   <span class="special">}</span>

   <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      </p>
<p>
        This example shows how to use windows service setup module to provide a installation
        system to application using program_options.
      </p>
<pre class="programlisting"><span class="bold"><strong>Installation</strong></span>
windows_service_setup.exe -i --name "My Service" --path "c:\myservice\service.exe"
windows_service_setup.exe -i --name "My Service" --path "c:\myservice\service.exe" --display "My Service"
windows_service_setup.exe -i --name "My Service" --path "c:\myservice\service.exe" --display "My Service" --description "Service Description"

<span class="bold"><strong>Check Installation</strong></span>
windows_service_setup.exe -c --name "My Service"

<span class="bold"><strong>Uninstallation</strong></span>
windows_service_setup.exe -u --name "My Service" --path "c:\myservice\service.exe"
</pre>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../../../../doc/src/images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top"><p>
          To install service you need have permission to do that. An easy way is
          execute installation as Admin.
        </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          Note that when arg name are not priovided, the name will be the name of
          executable, in this case, service name will be: 'windows_service_setup'
        </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
<p>
          Note that you can provide &#8220;user login&#8221; to install the service for a
          specific Windows User.
        </p>
<p>
          windows_service_setup.exe -i --name "My Service" --path "c:\myservice\service.exe"
          --display "My Service" --description "Service Description"
          --user "Renato Forti" --pass "1c2c3c"
        </p>
</td></tr>
</table></div>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../../../../../doc/src/images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
          The sample 'simple_server application.cpp' has the setup code embed on
          it. This shows a way to incorporate all required code into a single executable.
        </p></td></tr>
</table></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_application.windows_specifics.multi_service"></a><a class="link" href="windows_specifics.html#boost_application.windows_specifics.multi_service" title="Multi-Service Process">Multi-Service
      Process</a>
</h3></div></div></div>
<p>
        By definition, each Win32 service process can contain one or more services,
        running on separate threads.
      </p>
<p>
        Note that Boost.Application do not support more than one service at one executable.
        This limitation is imposed to maintain symmetry between Windows and POSIX
        sides.
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_application.windows_specifics.unicode"></a><a class="link" href="windows_specifics.html#boost_application.windows_specifics.unicode" title="Unicode on Services">Unicode
      on Services</a>
</h3></div></div></div>
<p>
        Boost.Application supports both Unicode and ANSI char types to develop a
        server (service) mode application, but is highly recommended that you use
        Unicode.
      </p>
<p>
        Windows has two versions of every API function that takes a string parameter,
        one for wide chars that name ends with W, and another that name ends with
        A for ANSI. The native call is for 'W' functions, while the 'A' version function
        simply ends up calling the 'W' function.
      </p>
<p>
        Uing ANSI therefore makes extra function call, and aditional string conversion
        overhad.
      </p>
<p>
        To know how Boost.Application handle Unicode, refer to <a href="../../html/boost_application/f_a_q_.html#boost_application.f_a_q_.how_unicode__windows__is_hadled_" target="_top">FAQ</a>
      </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2014 Dokfile Software Ltd.<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="other_features.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="posix_specifics.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
